# Topic 3 Node Module System

---

### **Concept**

**What is the Node.js Module System?**

* In Node.js, a **module** is simply a **file** that contains code (functions, objects, or variables) you can **reuse** in other files.
* It helps keep code **modular, organized, and maintainable**.
* Each file in Node.js is **treated as a separate module** by default.

---

### **Why Module System?**

| Feature                    | Explanation                                           |
| -------------------------- | ----------------------------------------------------- |
| **Code Reusability**       | Write once, use in multiple files.                    |
| **Maintainability**        | Split large programs into small, logical files.       |
| **Encapsulation**          | Each module has its own private scope.                |
| **Separation of Concerns** | Keep business logic, config, routes, etc., separated. |

---

### **How Node.js Handles Modules**

1. Node uses **CommonJS module system** (`require`, `module.exports`).
2. When you import (`require`) a file, Node wraps it inside a **function wrapper** to keep variables private.
3. Node maintains a **cache** of loaded modules — so they load only once.

---

### **Types of Modules**

| Type                   | Example                    | Description            |
| ---------------------- | -------------------------- | ---------------------- |
| **Core Module**        | `fs`, `os`, `path`, `http` | Built-in with Node.js  |
| **Local Module**       | `./utils.js`               | Custom created modules |
| **Third-party Module** | `express`, `mongoose`      | Installed via npm      |

---

### **Folder Setup**

```
nodejs-basics/
│
├── modules/
│   ├── math.js
│   └── greet.js
└── app.js
```

---

### **Code Example 1: Creating and Using a Local Module**

**File:** `modules/math.js`

```js
// ===========================
// Module: math.js
// ===========================

// Function to add two numbers
function add(a, b) {
  return a + b;
}

// Function to multiply two numbers
function multiply(a, b) {
  return a * b;
}

// Exporting the functions
module.exports = {
  add,
  multiply
};
```

**File:** `app.js`

```js
// ===========================
// Importing Local Module
// ===========================

// Import our custom math module
const math = require('./modules/math');

// Using exported functions
console.log("Addition:", math.add(5, 10));
console.log("Multiplication:", math.multiply(3, 7));
```

**Run in terminal:**

```bash
node app.js
```

**Output:**

```
Addition: 15
Multiplication: 21
```

---

### **Code Example 2: Exporting a Single Function**

**File:** `modules/greet.js`

```js
// ===========================
// Module: greet.js
// ===========================

// Exporting a single function directly
module.exports = function(name) {
  console.log(`Hello ${name}, welcome to Node modules!`);
};
```

**File:** `app.js` (updated)

```js
// ===========================
// Importing greet module
// ===========================

// Import function directly
const greet = require('./modules/greet');

// Call the function
greet("Tanish");
```

**Output:**

```
Hello Tanish, welcome to Node modules!
```

---

### **Mini Project: Utility Library**

**Goal:** Create a small utility library to handle string and number operations.

**Folder:**

```
utils-project/
│
├── utils/
│   ├── stringUtils.js
│   └── numberUtils.js
└── index.js
```

**File:** `utils/stringUtils.js`

```js
// ===========================
// String Utility Functions
// ===========================

function toUpper(str) {
  return str.toUpperCase();
}

function reverse(str) {
  return str.split('').reverse().join('');
}

module.exports = { toUpper, reverse };
```

**File:** `utils/numberUtils.js`

```js
// ===========================
// Number Utility Functions
// ===========================

function isEven(num) {
  return num % 2 === 0;
}

function factorial(n) {
  if (n === 0) return 1;
  return n * factorial(n - 1);
}

module.exports = { isEven, factorial };
```

**File:** `index.js`

```js
// ===========================
// Using Both Modules
// ===========================

const stringUtils = require('./utils/stringUtils');
const numberUtils = require('./utils/numberUtils');

console.log("Uppercase:", stringUtils.toUpper("nodejs"));
console.log("Reversed:", stringUtils.reverse("backend"));
console.log("Is 8 Even?:", numberUtils.isEven(8));
console.log("Factorial of 5:", numberUtils.factorial(5));
```

**Run in terminal:**

```bash
node index.js
```

**Output:**

```
Uppercase: NODEJS
Reversed: dnekcab
Is 8 Even?: true
Factorial of 5: 120
```

---

### **Dependencies**

* No external dependencies — uses **local modules only**.

---

### **Notes**

* Every JS file in Node.js is treated as a **module**.
* `module.exports` defines what can be accessed outside the file.
* Use `require()` to import exported data/functions.
* Node automatically caches modules to optimize performance.
* Modules can export:

  * A single function
  * An object
  * A class
  * Or multiple values

---
