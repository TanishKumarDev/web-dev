# Topic 4 Node Package Manager (NPM)

---

### **Concept**

**What is npm?**

* **npm (Node Package Manager)** is the **default package manager** for Node.js.
* It allows developers to **install, manage, update, and share** reusable JavaScript code packages (called **modules**).
* It comes automatically when you install Node.js.

---

### **Why npm?**

| Feature                   | Explanation                                   |
| ------------------------- | --------------------------------------------- |
| **Code Reuse**            | Avoid reinventing — use existing libraries.   |
| **Dependency Management** | Automatically installs all required packages. |
| **Version Control**       | Lock and manage versions via `package.json`.  |
| **Open Source Community** | Millions of ready-to-use libraries.           |
| **Script Automation**     | Run tasks using npm scripts.                  |

---

### **How npm Works**

1. You create a project folder and initialize npm.
2. npm generates a **`package.json`** file — like your project’s blueprint.
3. When you install packages, they are stored in the **`node_modules`** folder.
4. npm keeps track of installed packages and their versions.

---

### **Folder Setup**

```
npm-demo/
│
├── app.js
├── package.json
└── node_modules/
```

---

### **Step 1: Initialize npm**

Run this command in your project folder:

```bash
npm init -y
```

**It creates:**

```json
{
  "name": "npm-demo",
  "version": "1.0.0",
  "main": "app.js",
  "license": "ISC"
}
```

---

### **Step 2: Install a Package**

Example: install **lodash**, a popular utility library.

```bash
npm install lodash
```

Creates:

* `node_modules/` (contains the library)
* `package-lock.json` (locks version)
* Updates `package.json` with dependency

```json
"dependencies": {
  "lodash": "^4.17.21"
}
```

---

### **Code Example 1: Using npm Package**

**File:** `app.js`

```js
// ===========================
// Example: Using lodash
// ===========================

// Import lodash library
const _ = require('lodash');

// Sample array with duplicates
const numbers = [10, 20, 20, 30, 40, 40];

// Use lodash's 'uniq' function to remove duplicates
const uniqueNumbers = _.uniq(numbers);

// Log the result
console.log("Original Array:", numbers);
console.log("Unique Array:", uniqueNumbers);
```

**Run:**

```bash
node app.js
```

**Output:**

```
Original Array: [10, 20, 20, 30, 40, 40]
Unique Array: [10, 20, 30, 40]
```

---

### **Step 3: Install Packages Globally**

If you want a tool available everywhere (e.g., nodemon):

```bash
npm install -g nodemon
```

Check version:

```bash
nodemon -v
```

Use it to auto-restart your server on file changes:

```bash
nodemon app.js
```

---

### **Step 4: Uninstall or Update Packages**

```bash
npm uninstall lodash
npm update lodash
```

---

### **Mini Project: Using External npm Packages**

**Goal:** Build a small CLI tool that prints random quotes.

**Folder:**

```
npm-quote-app/
│
├── app.js
├── package.json
└── node_modules/
```

**Install Dependencies:**

```bash
npm init -y
npm install axios chalk
```

**File:** `app.js`

```js
// ===========================
// Mini Project: Random Quote CLI
// ===========================

// Import dependencies
const axios = require('axios');   // For HTTP requests
const chalk = require('chalk');   // For colorful console output

// Function to fetch random quote
async function getQuote() {
  try {
    // Fetch data from a free API
    const res = await axios.get('https://api.quotable.io/random');

    // Display the quote in styled format
    console.log(chalk.greenBright("\n--- Random Quote ---"));
    console.log(chalk.yellow(res.data.content));
    console.log(chalk.cyan(`~ ${res.data.author}\n`));
  } catch (error) {
    console.log(chalk.red("Error fetching quote:", error.message));
  }
}

// Run the function
getQuote();
```

**Run the tool:**

```bash
node app.js
```

**Output Example:**

```
--- Random Quote ---
Happiness depends upon ourselves.
~ Aristotle
```

---

### **Dependencies**

| Package    | Purpose                                                 |
| ---------- | ------------------------------------------------------- |
| **axios**  | To make API requests.                                   |
| **chalk**  | To add colored output in terminal.                      |
| **lodash** | (optional) Utility library for array/object operations. |

---

### **Notes**

* `package.json` is the heart of every Node.js project.
* Use `npm init -y` for quick setup.
* `node_modules/` should **never** be pushed to GitHub — always use `.gitignore`.
* Global installs (`-g`) are used for CLI tools.
* `npm run <script>` executes commands defined inside `package.json`.
