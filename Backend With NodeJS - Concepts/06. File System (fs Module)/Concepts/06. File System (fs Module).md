# Topic 6 File System (fs Module)

---

### **Concept**

**What is the File System (fs) module?**

* The **`fs` (File System)** module in Node.js allows you to **interact with the file system** on your computer.
* It can **read**, **write**, **update**, **delete**, and **rename** files and directories.
* It provides two main methods:

  * **Synchronous (blocking)** — e.g., `fs.readFileSync()`
  * **Asynchronous (non-blocking)** — e.g., `fs.readFile()`

---

### **Why fs Module?**

| Task                          | Function                   |
| ----------------------------- | -------------------------- |
| **Create / Write file**       | `fs.writeFile()`           |
| **Append data**               | `fs.appendFile()`          |
| **Read file**                 | `fs.readFile()`            |
| **Delete file**               | `fs.unlink()`              |
| **Rename file**               | `fs.rename()`              |
| **Create / Remove directory** | `fs.mkdir()`, `fs.rmdir()` |

---

### **How fs Works**

1. You import the module using `const fs = require('fs');`
2. You can use either:

   * **Sync methods** → run sequentially and block code until finished.
   * **Async methods** → run in background and use **callbacks** or **promises**.
3. Best practice: always use **asynchronous** methods for performance.

---

### **Folder Setup**

```
fs-demo/
│
├── app.js
└── data/
    └── notes.txt
```

---

### **Code Example 1: Write and Read Files (Asynchronous)**

**File:** `app.js`

```js
// ===========================
// Example: Write and Read Files
// ===========================

const fs = require('fs');

// Write data to a new file (creates file if not exists)
fs.writeFile('./data/notes.txt', 'Learning Node.js File System module!', (err) => {
  if (err) throw err;
  console.log('File created and data written successfully!');

  // Now read the file
  fs.readFile('./data/notes.txt', 'utf8', (err, data) => {
    if (err) throw err;
    console.log('\nFile Content:\n', data);
  });
});
```

**Run in terminal:**

```bash
node app.js
```

**Output:**

```
File created and data written successfully!

File Content:
Learning Node.js File System module!
```

---

### **Code Example 2: Append, Rename, and Delete**

**File:** `app.js` (continued)

```js
// ===========================
// Example: Append, Rename, Delete Files
// ===========================

const fs = require('fs');

// Append data to existing file
fs.appendFile('./data/notes.txt', '\nAppended line using fs.appendFile().', (err) => {
  if (err) throw err;
  console.log('Data appended successfully!');

  // Rename file
  fs.rename('./data/notes.txt', './data/updated-notes.txt', (err) => {
    if (err) throw err;
    console.log('File renamed successfully!');

    // Delete file
    fs.unlink('./data/updated-notes.txt', (err) => {
      if (err) throw err;
      console.log('File deleted successfully!');
    });
  });
});
```

**Output Example:**

```
Data appended successfully!
File renamed successfully!
File deleted successfully!
```

---

### **Code Example 3: Using Synchronous Methods**

**File:** `sync-fs.js`

```js
// ===========================
// Example: Synchronous Methods
// ===========================

const fs = require('fs');

// Write a file
fs.writeFileSync('./data/sync.txt', 'Synchronous file write example.');

// Read the file
const data = fs.readFileSync('./data/sync.txt', 'utf8');
console.log('File Content:', data);

// Delete the file
fs.unlinkSync('./data/sync.txt');
console.log('File deleted successfully.');
```

**Output:**

```
File Content: Synchronous file write example.
File deleted successfully.
```

---

### **Mini Project: Notes Manager**

**Goal:** Build a simple **Note Manager CLI tool** using the fs module.

**Folder:**

```
notes-app/
│
├── app.js
└── data/
    └── notes.json
```

**File:** `app.js`

```js
// ===========================
// Mini Project: Notes Manager
// ===========================

const fs = require('fs');
const path = require('path');

// Define file path for notes
const notesFile = path.join(__dirname, 'data', 'notes.json');

// Function to add a note
function addNote(title, body) {
  let notes = [];

  // If file exists, read old notes
  if (fs.existsSync(notesFile)) {
    const data = fs.readFileSync(notesFile, 'utf8');
    notes = JSON.parse(data);
  }

  // Add new note
  notes.push({ title, body });

  // Write back to file
  fs.writeFileSync(notesFile, JSON.stringify(notes, null, 2));
  console.log(`Note "${title}" added successfully.`);
}

// Function to list all notes
function listNotes() {
  if (!fs.existsSync(notesFile)) return console.log("No notes found.");
  const data = fs.readFileSync(notesFile, 'utf8');
  const notes = JSON.parse(data);
  console.log("\nAll Notes:");
  notes.forEach((note, index) => {
    console.log(`${index + 1}. ${note.title} - ${note.body}`);
  });
}

// Function to delete a note by title
function deleteNote(title) {
  if (!fs.existsSync(notesFile)) return console.log("No notes to delete.");
  const data = fs.readFileSync(notesFile, 'utf8');
  let notes = JSON.parse(data);
  notes = notes.filter(note => note.title !== title);
  fs.writeFileSync(notesFile, JSON.stringify(notes, null, 2));
  console.log(`Note "${title}" deleted successfully.`);
}

// Example Usage
addNote("Learning FS", "Today I learned how to use fs module in Node.js");
addNote("Async vs Sync", "Async is non-blocking, Sync blocks execution.");
listNotes();
deleteNote("Async vs Sync");
listNotes();
```

**Run in terminal:**

```bash
node app.js
```

**Output Example:**

```
Note "Learning FS" added successfully.
Note "Async vs Sync" added successfully.

All Notes:
1. Learning FS - Today I learned how to use fs module in Node.js
2. Async vs Sync - Async is non-blocking, Sync blocks execution.

Note "Async vs Sync" deleted successfully.

All Notes:
1. Learning FS - Today I learned how to use fs module in Node.js
```

---

### **Dependencies**

* No external dependencies — only built-in `fs` and `path` modules.

---

### **Notes**

* Use **asynchronous methods** in production to avoid blocking the event loop.
* Always check file existence with `fs.existsSync()` before reading/writing.
* Prefer `JSON.stringify(data, null, 2)` for readable JSON formatting.
* For large projects, use **promises (`fs.promises`)** or async/await for cleaner code.

---
